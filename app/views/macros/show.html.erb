<div class="banner-macro d-flex flex-column">
  <div class="d-flex justify-content-between buttons">
    <div>
      <%= link_to macros_path, class: 'btn btn-secondary back-btn' do %>
        <i class="fas fa-arrow-left"></i> Back to the list
      <% end %>
    </div>
    <div class="d-flex align-items-center">
      <% if current_user.favorited?(@macro) %>
        <%= link_to unfavorite_path do %>
          <i class="fas fa-star mr-1"></i>
        <% end %>
      <% else %>
        <%= link_to favorite_path do %>
          <i class="far fa-star mr-1"></i>
        <% end %>
      <% end %>
      <%= link_to "Edit", edit_macro_path(@macro), class: "btn btn-secondary back-btn mr-1" %>
      <%= link_to "Remove", macro_path(@macro), method: :delete, class: "btn btn-secondary back-btn"%>
    </div>
  </div>

  <div class="container pt-5">
    <h1><%= @macro.name %></h1>
  </div>
</div>

<h2 class="header">Description</h2>
<%= simple_format(@macro.description) %>

<h2 class="header">Code</h2>
<%= simple_format(@macro.code) %>

<h2 class="header">Tags</h2>
<% if @macro.tag_list.empty? %>
  <h5 class="text-secondary mb-4">No tags yet</h5>
<% else %>
  <% @macro.tag_list[0...-1].each do |tag| %>
    <%= link_to tag, macros_path(tags: tag), class: "link-tags" %> â€¢
  <% end %>
  <%= link_to @macro.tag_list[-1], macros_path(tags: @macro.tag_list[-1]), class: "link-tags" %>
<% end %>

<h2 class="header">Comments</h2>

<!-- New comment form -->
<%= simple_form_for [@macro, @comment] do |f| %>
  <div class="form-inputs">
    <%= f.input :content, label: 'New comment', input_html: { autocomplete: 'off' } %>
  </div>

  <div class="form-actions">
    <%= f.submit 'Save', class: 'btn btn-primary btn-sm mb-4' %>
  </div>
<% end %>

<!-- If there are no comments -->
<% if @macro.comments.empty? %>
  <h5 class="text-secondary mb-4">No comments yet</h5>
<% else %>

<!-- If there are comments -->
    <div class="mb-4">
      <% @macro.comments.each do |comment| %>
        <div class="comment">
          <%= image_tag "avatar.png", class: "avatar-large" %>
          <div class="comment-content">
            <p><small><%= comment.user.email.split("@")[0].capitalize %> - <%= comment.created_at.strftime("%A, %d %b %Y %l:%M %p") %></small></p>
            <p><%= comment.content %></p>
          </div>

          <div class="comment-actions">
            <a href="#">Edit <i class="fas fa-pencil-alt"></i></a>
            <a href="#">Delete <i class="far fa-trash-alt"></i></a>
          </div>
        </div>
      <% end %>
    </div>

<% end %>




